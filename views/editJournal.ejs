<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Yee Mon's Travel Journals</title>
</head>

<body>

    <%- include ('partials/navbar.ejs') %>

    <div class="container-fluid p-5 text-dark" style="background-color: #F3EFDE;">

        <div class="text-center mb-2">
            <h2 style="font-weight: 700;">Update journal</h2>
        </div>

        <div class="px-5 text-center">

            <% if (journal) { %>

                <form action="/editJournal/ <%= journal.journalId %>" method="POST" class="px-5" enctype="multipart/form-data">

                    <div class="mb-3 mt-3 px-5">
                        <label for="location" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Location:</label><br>
                        <input type="text" id="location" placeholder="Update the location" name="location" style="width: 50%" value="<%= journal.location %>" required>
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5">
                        <label for="period" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Travel Period:</label><br>
                        <input type="text" id="period" placeholder="Update your travel period" name="period" style="width: 50%" value="<%= journal.period %>" required>
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5">
                        <label for="title" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Title:</label><br>
                        <input type="text" id="title" placeholder="Update the title for your journal" name="title" style="width: 50%" value="<%= journal.title %>" required>
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5">
                        <label for="text" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Text:</label><br>
                        <textarea id="text" placeholder="Update the text for your journal" name="text" style="width: 50%" rows="10" required><%= journal.text %></textarea>
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5">
                        <label for="date" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Date:</label><br>
                        <input type="date" id="date" name="date" value="<%= journal.date.toLocaleDateString() %>" required>
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5">
                        <label for="image" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">Current Image:</label><br>
                        <input type="text" name="currentImage" id="currentImage" style="width: 50%" value="<%= journal.image %>" disabled>
                        <br>
                        <br>
                        <img src="/images/<%= journal.image %>" width="20%">
                    </div>

                    <br>

                    <div class="mb-3 mt-3 px-5 text-muted" class="text-muted" style="font-family: Arial, Helvetica, sans-serif; font-size: large;">
                        New Image:<br> <input type="file" id="image" name="image" accept="image/*" required>
                    </div>

                    <br>

                    <div class="mb-3 mt-4 px-5">
                        <button type="submit" class="btn btn-outline-dark" onclick="return confirm('Are you sure you want to submit this journal?')">Submit</button>
                    </div>

                </form>

            <% } else { %>
                <p>No journal found.</p>
            <% } %>

            <div>
                <a href="/" class="btn btn-outline-dark">Back</a>
            </div>

        </div>

    </div>
    
    <%- include ('partials/footer.ejs') %>


</body>
</html>